# Initial dictionary of contacts with names as keys and phone numbers as values
contacts = {
    "Marcel":"+44 3427098",
    "John":"+44 42334442",
    "Alex":"+44 32432411"
}

# Main loop to keep the program running until the user chooses to exit
while True:

    # Try to get the user's menu choice and handle invalid input
    try:
        main = int(input("What do you want to do?\n1. Show contacts\n2. Change phone number or Contact name\n3. Add new contact\n4. Exit\n"))
    except ValueError:
        print("Enter the number of your option.")  # Error if input is not an integer
        continue  # Restart loop if input is invalid
        
    # Option 1: Show all contacts
    if main == 1:
        for name, number in contacts.items():  # Loop through all contacts
            print(f"{name}: {number}\n")  # Print contact name and phone number

    # Option 2: Change a contact's number or name
    elif main == 2:
        change = input("Do you want to change the number or contact name? ").lower()  # Ask what to change

        # Sub-option: Change phone number
        if change == 'number':
            whos = input("Whos number do you want to change? ")  # Ask whose number to change
            
            if whos in contacts:  # Check if contact exists
                new_value = input("What do you want to change it to? ")  # Ask for new number
                contacts[whos] = new_value  # Update phone number
            else:
                print("Unknown Contact.")  # Contact not found
                
        # Sub-option: Change contact name
        elif change == 'contact name':
            whos = input("Whose contact name do you want to change? ")  # Ask whose name to change
                
            if whos in contacts:  # Check if contact exists
                new_key = input("What do you want to change it to? ")  # Ask for new name
                
                contacts[new_key] = contacts[whos]  # Copy the value to new key
                del contacts[whos]  # Delete old key
                    
                print(f"\nContact name changed from '{whos}' to '{new_key}'\n")  # Confirm change
            else:
                print("That contact doesn't exist.")  # Contact not found
    
    # Option 3: Add a new contact
    elif main == 3:
        new_key = input("Enter the new contact name: ".lower()).capitalize()  # Ask for new contact name
            
        # Loop until a valid phone number is entered
        while True:
            new_value = input("Enter phone number (must start with + and be at least 8 characters): ")
            
            if not new_value.startswith("+"):  # Validate phone number starts with '+'
                print("Invalid phone number. It must start with +. Please try again.")
                continue  # Ask again
        
            if len(new_value) < 8:  # Validate minimum length
                print("Invalid phone number. Too short. Please try again.")
                continue  # Ask again
        
            break  # Valid input, exit loop
        
        print(f"Phone number accepted: {new_value}\n")  # Confirm valid phone number

        contacts[new_key] = new_value  # Add new contact to dictionary
    
    # Option 4: Exit the program
    elif main == 4:
        print("\nGoodbye!")
        break  # Exit main loop
    
    # Option 5: Remove a contact
    elif main == 5:
        remove_name = input("Enter the name of the contact you want to remove: ")  # Ask which contact to delete
        if remove_name in contacts:  # Check if contact exists
            del contacts[remove_name]  # Delete the contact
            print(f"{remove_name} has been removed from your contacts.\n")  # Confirm deletion
        else:
            print("That contact does not exist.\n")  # Contact not found
            
    # Handle invalid menu options
    else:
        print("That function doesnt exist.\n")  # Invalid menu choice
